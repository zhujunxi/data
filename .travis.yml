branches:
  only:
    - master

language: node_js

node_js: stable

cache:
  directories:
    - node_modules

install:
  - yarn install

script:
  - yarn build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: ${GITHUB_ACCESS_TOKEN} # Set in the settings page of your repository, as a secure variable
  keep_history: true
  email: 531578783@qq.com
  target-branch: gh-pages
  local-dir: dist
  on:
    branch: master
# branches:
#   only:
#     - master

# language: node_js

# sudo: false

# node_js: stable

# cache:
#   directories:
#     - node_modules

# addons:
#   apt:
#     packages:
#       - xvfb

# install:
#   - export DISPLAY=':99.0'
#   - Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &
#   - npm install

# before_script:
#   - git config user.name "yourusername"
#   - git config user.email "youremail@xx.com"
#   - git clone --branch gh-pages https://${GH_REF} dist

# script:
#   - npm test

# after_success:
#   - npm run build
#   - cd dist
#   - echo "lightmoon.pw" > CNAME
#   - cp index.html 404.html
#   - git add --all .
#   - git commit --message "Automatically update from travis-ci"
#   - git push --quiet --force  "https://${GH_TOKEN}@${GH_REF}" gh-pages:gh-pages

# # Note: you should set Environment Variables here or 'Settings' on travis-ci.org
# env:
#   global:
#     - GH_REF: github.com/zytx121/vue-blog.git
